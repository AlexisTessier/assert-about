{"version":3,"sources":["Topic.js"],"names":[],"mappings":"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","file":"Topic.js","sourcesContent":["var _ = require('lodash');\r\n\r\n/*-----------private keys-----------*/\r\nvar createAssertionLauncher = Symbol();\r\nvar createAssertionSuite = Symbol();\r\nvar assertionSuite = Symbol();\r\nvar launchNextAssertionGenerator = Symbol();\r\nvar launchNextAssertionIterator = Symbol();\r\nvar launchNextAssertion = Symbol();\r\nvar assertionList = Symbol();\r\n\r\nclass Topic {\r\n\tconstructor({value}) {\r\n\t\t\r\n\t\tthis.value = value;\r\n\r\n\t\tthis[assertionList] = [];\r\n\t\tthis[launchNextAssertionGenerator] = function*(self){\r\n\t\t\tfor(var i=0,imax = self[assertionSuite].length;i<imax;i++){\r\n\t\t\t\tyield self[assertionSuite][i];\r\n\t\t\t}\t\t\t\r\n\t\t};\r\n\t}\r\n\r\n\taddAssertion(name, testBlock, args){\r\n\t\tthis[assertionList].push({\r\n\t\t\tname,\r\n\t\t\ttestBlock,\r\n\t\t\targs\r\n\t\t});\r\n\t}\r\n\r\n\tlaunchAssertionSuite(){\r\n\t\tthis[assertionSuite] ? null : this[createAssertionSuite]();\r\n\t\tthis[launchNextAssertion]();\r\n\t}\r\n\r\n\t[launchNextAssertion](){\r\n\t\tif (!this[launchNextAssertionIterator]) {\r\n\t\t\tthis[launchNextAssertionIterator] = this[launchNextAssertionGenerator](this);\r\n\t\t}\r\n\r\n\t\tvar next = this[launchNextAssertionIterator].next().value;\r\n\r\n\t\tdelete this.assert;\r\n\r\n\t\tif (_.isFunction(next)) {\r\n\t\t\tnext(function(assertFunc) {\r\n\t\t\t\tvar topic = this.args.shift();\r\n\r\n\t\t\t\ttry{\r\n\t\t\t\t\tassertFunc();\r\n\t\t\t\t}\r\n\t\t\t\tcatch(e){\r\n\t\t\t\t\te.message = \"One of your assertion about \"+topic.value+\" is not correct :\";\r\n\t\t\t\t\te.message += \"\\n\\t\"+this.name+\" \";\r\n\t\t\t\t\te.message += this.args.join(', ');\r\n\t\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttopic[launchNextAssertion]();\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconsole.log(\"All your assertions about \"+this.value+\" are correct.\");\r\n\t\t}\r\n\t}\r\n\r\n\t[createAssertionSuite](){\r\n\t\tthis[assertionSuite] = [];\r\n\t\t_.forEach(this[assertionList], (assertion) => {\r\n\t\t\tthis[assertionSuite].push(this[createAssertionLauncher](assertion));\r\n\t\t})\r\n\t}\r\n\r\n\t[createAssertionLauncher]({name, testBlock, args}){\r\n\t\tvar self = this;\r\n\t\treturn function assertionLauncher(assertFunc) {\r\n\t\t\tself.assert = assertFunc.bind({name, args});\r\n\t\t\targs.unshift(self);\r\n\t\t\ttestBlock.call(self, ...args);\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport default Topic;"],"sourceRoot":"/source/"}